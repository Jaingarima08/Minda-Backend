function a2_0x181f(_0x330c0d,_0x5b71d9){const _0x5dc299=a2_0x5dc2();return a2_0x181f=function(_0x181f4c,_0x445876){_0x181f4c=_0x181f4c-0x1a1;let _0x406586=_0x5dc299[_0x181f4c];return _0x406586;},a2_0x181f(_0x330c0d,_0x5b71d9);}function a2_0x5dc2(){const _0x2025b5=['data','application/json','length','ðŸ”„\x20Processing\x20Customer\x20','Internal\x20Server\x20Error','map','ðŸ“¦\x20Received\x20','results','axios','processedRows','error','\x20Error\x20inserted\x20or\x20updating\x20customer\x20data:','json','Name1','../models/customerModel','âŒ\x20Error\x20syncing\x20customer\x20data:','message','status','\x20customers\x20from\x20API','ðŸ”\x20Fetching\x20Customer\x20Data\x20from\x20API:','CUSTOMER_API','5470158JVcoHF','âŒ\x20API\x20Response\x20Format\x20Incorrect:','Invalid\x20data\x20format\x20received\x20from\x20SAP','warn','dotenv','exports','5088398ThXYLJ','object','32MDrBtH','Vkorg','failedRows','105KKkOdC','6148064TvkInd','get','isArray','stringify','SAP_USERNAME','Bztxt','7543863ostpMd','Bzirk','log','...','Kunnr','SAP_PASSWORD','slice','1097690DfvdyQ','\x20Customer\x20data\x20synced\x20successfully','325402MKtEPB','48354QyhzMQ','env','ðŸš€\x20Starting\x20Customer\x20Data\x20Sync...'];a2_0x5dc2=function(){return _0x2025b5;};return a2_0x5dc2();}const a2_0x5f4ccd=a2_0x181f;(function(_0x292b09,_0x464f67){const _0x99d29b=a2_0x181f,_0x2549eb=_0x292b09();while(!![]){try{const _0x1f8f26=parseInt(_0x99d29b(0x1c5))/0x1+parseInt(_0x99d29b(0x1c6))/0x2*(-parseInt(_0x99d29b(0x1b5))/0x3)+parseInt(_0x99d29b(0x1b2))/0x4*(-parseInt(_0x99d29b(0x1c3))/0x5)+parseInt(_0x99d29b(0x1aa))/0x6+parseInt(_0x99d29b(0x1b0))/0x7+parseInt(_0x99d29b(0x1b6))/0x8+parseInt(_0x99d29b(0x1bc))/0x9;if(_0x1f8f26===_0x464f67)break;else _0x2549eb['push'](_0x2549eb['shift']());}catch(_0x998bc6){_0x2549eb['push'](_0x2549eb['shift']());}}}(a2_0x5dc2,0xec621));const axios=require(a2_0x5f4ccd(0x1d1)),{upsertCustomer}=require(a2_0x5f4ccd(0x1a3));require(a2_0x5f4ccd(0x1ae))['config']();const API_URL=process[a2_0x5f4ccd(0x1c7)][a2_0x5f4ccd(0x1a9)],fetchSAPCustomers=async()=>{const _0x5b796f=a2_0x5f4ccd;try{console['log'](_0x5b796f(0x1a8),API_URL);const _0x2528d8=await axios[_0x5b796f(0x1b7)](API_URL,{'auth':{'username':process['env'][_0x5b796f(0x1ba)],'password':process[_0x5b796f(0x1c7)][_0x5b796f(0x1c1)]},'headers':{'Accept':_0x5b796f(0x1ca)},'responseType':_0x5b796f(0x1a1)});if(!_0x2528d8[_0x5b796f(0x1c9)]){console[_0x5b796f(0x1ad)]('âš ï¸\x20Received\x20empty\x20response\x20from\x20API');throw new Error('Empty\x20response\x20from\x20API');}return console[_0x5b796f(0x1be)]('âœ…\x20API\x20Response\x20Received.\x20Length:',JSON[_0x5b796f(0x1b9)](_0x2528d8[_0x5b796f(0x1c9)])[_0x5b796f(0x1cb)]),console[_0x5b796f(0x1be)]('\x20API\x20Response\x20Data:',JSON['stringify'](_0x2528d8['data'],null,0x2)),_0x2528d8[_0x5b796f(0x1c9)];}catch(_0x2e18b3){console[_0x5b796f(0x1d3)]('âŒ\x20Error\x20fetching\x20SAP\x20customer\x20data:',_0x2e18b3[_0x5b796f(0x1a5)]);throw new Error('SAP\x20API\x20Error:\x20'+_0x2e18b3[_0x5b796f(0x1a5)]);}},fetchAndStoreCustomers=async(_0x2c1339,_0x263f62)=>{const _0xf4f2f=a2_0x5f4ccd;try{console['log'](_0xf4f2f(0x1c8));const _0xbdca41=await fetchSAPCustomers();if(!_0xbdca41||typeof _0xbdca41!==_0xf4f2f(0x1b1)||!_0xbdca41['d']||!Array[_0xf4f2f(0x1b8)](_0xbdca41['d'][_0xf4f2f(0x1d0)]))return console[_0xf4f2f(0x1d3)](_0xf4f2f(0x1ab),JSON[_0xf4f2f(0x1b9)](_0xbdca41)[_0xf4f2f(0x1c2)](0x0,0xa)+_0xf4f2f(0x1bf)),_0x263f62[_0xf4f2f(0x1a6)](0x190)[_0xf4f2f(0x1a1)]({'message':_0xf4f2f(0x1ac)});console[_0xf4f2f(0x1be)](_0xf4f2f(0x1cf)+_0xbdca41['d'][_0xf4f2f(0x1d0)]['length']+_0xf4f2f(0x1a7));const _0x2bb61a=_0xbdca41['d']['results'][_0xf4f2f(0x1ce)]((_0x167793,_0x4d844c)=>{const _0xa859f4=_0xf4f2f;return console['log'](_0xa859f4(0x1cc)+(_0x4d844c+0x1)+':',_0x167793['Kunnr']),{'Kunnr':String(_0x167793[_0xa859f4(0x1c0)]),'Vkorg':String(_0x167793[_0xa859f4(0x1b3)]),'Bzirk':String(_0x167793[_0xa859f4(0x1bd)]||''),'Name1':String(_0x167793[_0xa859f4(0x1a2)]),'Bztxt':String(_0x167793[_0xa859f4(0x1bb)]||'')};})['filter'](Boolean);console[_0xf4f2f(0x1be)]('ðŸ“Œ\x20Final\x20Data\x20Before\x20Upsertion:',JSON[_0xf4f2f(0x1b9)](_0x2bb61a,null,0x2));const _0x30ef05=await upsertCustomer(_0x2bb61a);if(!_0x30ef05||typeof _0x30ef05!==_0xf4f2f(0x1b1)||!_0x30ef05['success']){console[_0xf4f2f(0x1d3)](_0xf4f2f(0x1d4),_0x30ef05?.[_0xf4f2f(0x1d3)]||'Unexpected\x20database\x20response');if(_0x263f62)return _0x263f62[_0xf4f2f(0x1a6)](0x1f4)['json']({'message':'Error\x20insering\x20or\x20updating\x20customer\x20data','error':_0x30ef05?.[_0xf4f2f(0x1d3)]||'Database\x20error'});return;}console[_0xf4f2f(0x1be)]('\x20Customer\x20Data\x20Sync\x20Completed\x20Successfully\x20');if(_0x263f62)return _0x263f62[_0xf4f2f(0x1a6)](0xc8)['json']({'message':_0xf4f2f(0x1c4),'insertedRows':_0x30ef05[_0xf4f2f(0x1d2)]['length'],'updatedRows':_0x30ef05[_0xf4f2f(0x1d2)][_0xf4f2f(0x1cb)],'failedRows':_0x30ef05[_0xf4f2f(0x1b4)][_0xf4f2f(0x1cb)],'errors':_0x30ef05[_0xf4f2f(0x1b4)]});}catch(_0x2d6cd9){console[_0xf4f2f(0x1d3)](_0xf4f2f(0x1a4),_0x2d6cd9[_0xf4f2f(0x1a5)]);if(_0x263f62)return _0x263f62['status'](0x1f4)[_0xf4f2f(0x1a1)]({'message':_0xf4f2f(0x1cd),'error':_0x2d6cd9[_0xf4f2f(0x1a5)]});}};module[a2_0x5f4ccd(0x1af)]={'fetchAndStoreCustomers':fetchAndStoreCustomers};