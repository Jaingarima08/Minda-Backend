function a6_0x6840(_0x32526e,_0x489d85){const _0x5e05c7=a6_0x5e05();return a6_0x6840=function(_0x68403f,_0xb26abf){_0x68403f=_0x68403f-0x179;let _0x4df9af=_0x5e05c7[_0x68403f];return _0x4df9af;},a6_0x6840(_0x32526e,_0x489d85);}const a6_0xd39484=a6_0x6840;(function(_0x4e06cf,_0x4b0c91){const _0x3a0264=a6_0x6840,_0x9d194=_0x4e06cf();while(!![]){try{const _0x18da31=-parseInt(_0x3a0264(0x184))/0x1*(parseInt(_0x3a0264(0x18e))/0x2)+parseInt(_0x3a0264(0x1a4))/0x3*(parseInt(_0x3a0264(0x1a0))/0x4)+parseInt(_0x3a0264(0x19c))/0x5+parseInt(_0x3a0264(0x17e))/0x6*(parseInt(_0x3a0264(0x188))/0x7)+-parseInt(_0x3a0264(0x18c))/0x8*(parseInt(_0x3a0264(0x1a9))/0x9)+-parseInt(_0x3a0264(0x1aa))/0xa*(parseInt(_0x3a0264(0x1ab))/0xb)+parseInt(_0x3a0264(0x194))/0xc;if(_0x18da31===_0x4b0c91)break;else _0x9d194['push'](_0x9d194['shift']());}catch(_0x39d1db){_0x9d194['push'](_0x9d194['shift']());}}}(a6_0x5e05,0x38296));function a6_0x5e05(){const _0x51b076=['❌\x20Error\x20fetching\x20SAP\x20sales\x20order\x20data:','❌\x20Skipping\x20invalid\x20entry\x20at\x20index\x20','📌\x20API\x20Response\x20Data:','exports','Waerk','7qNRbhJ','results','json','✅\x20Sales\x20order\x20data\x20inserted/updated\x20successfully','370699egLHcf','success','SAP\x20API\x20Error:\x20','📌\x20Final\x20Data\x20Before\x20Insert/Update:','1338488rSwsGk','warn','26870WbTNBt','get','🔍\x20Fetching\x20Sales\x20Order\x20Data\x20from\x20API:','status','📦\x20Received\x20','slice','663216iMCXtA','❌\x20Error\x20processing\x20sales\x20order\x20data:','length','toFixed','toString','Bztxt','❌\x20API\x20Response\x20Format\x20Incorrect:','map','742990ZaZxUg','🚀\x20Starting\x20Sales\x20Order\x20Data\x20Sync...','message','data','56cNFKDN','SAP_USERNAME','config','Bzirk','42990OgQLyi','filter','dotenv','axios','failedRows','9xFHiue','10MpFHPd','1956647wkoBNU','Matkl','\x20sales\x20orders\x20from\x20API','Sales\x20orders\x20synced\x20successfully','replace','Netwr','Vbeln','env','Empty\x20response\x20from\x20API','processedRows','application/json','⚠️\x20Received\x20empty\x20response\x20from\x20API','Auart','../models/salesOrderModel','Unexpected\x20database\x20response','toISOString','Database\x20error','log','object','stringify','error','❌\x20Error\x20syncing\x20sales\x20order\x20data:','Matnr','...','Invalid\x20data\x20format\x20received\x20from\x20SAP','Kunnr','SALES_ORDER','30HIFliT'];a6_0x5e05=function(){return _0x51b076;};return a6_0x5e05();}const axios=require(a6_0xd39484(0x1a7)),{insertOrUpdateSalesOrders}=require(a6_0xd39484(0x1b8));require(a6_0xd39484(0x1a6))[a6_0xd39484(0x1a2)]();const API_URL=process['env'][a6_0xd39484(0x17d)],convertSAPDateTime=_0x5522a0=>{const _0xd6a5e4=a6_0xd39484;if(!_0x5522a0)return null;const _0x508123=_0x5522a0['match'](/\d+/);if(!_0x508123)return null;const _0x50a82a=parseInt(_0x508123[0x0],0xa),_0x20ddb7=new Date(_0x50a82a);return _0x20ddb7[_0xd6a5e4(0x1ba)]()[_0xd6a5e4(0x1af)]('T','\x20')['split']('.')[0x0];},convertToDecimal=_0x10e933=>{const _0x2ad1a1=a6_0xd39484;if(!_0x10e933||isNaN(_0x10e933))return'0.00';return parseFloat(_0x10e933[_0x2ad1a1(0x198)]()[_0x2ad1a1(0x1af)](',','.'))[_0x2ad1a1(0x197)](0x2);},fetchSAPSalesOrders=async()=>{const _0x54c20e=a6_0xd39484;try{console[_0x54c20e(0x1bc)](_0x54c20e(0x190),API_URL);const _0x103a05=await axios[_0x54c20e(0x18f)](API_URL,{'auth':{'username':process['env'][_0x54c20e(0x1a1)],'password':process[_0x54c20e(0x1b2)]['SAP_PASSWORD']},'headers':{'Accept':_0x54c20e(0x1b5)}});if(!_0x103a05[_0x54c20e(0x19f)]){console[_0x54c20e(0x18d)](_0x54c20e(0x1b6));throw new Error(_0x54c20e(0x1b3));}return console[_0x54c20e(0x1bc)]('✅\x20API\x20Response\x20Received.\x20Length:',JSON[_0x54c20e(0x1be)](_0x103a05[_0x54c20e(0x19f)])[_0x54c20e(0x196)]),console[_0x54c20e(0x1bc)](_0x54c20e(0x181),JSON['stringify'](_0x103a05[_0x54c20e(0x19f)],null,0x2)),_0x103a05[_0x54c20e(0x19f)];}catch(_0x1dd522){console[_0x54c20e(0x1bf)](_0x54c20e(0x17f),_0x1dd522[_0x54c20e(0x19e)]);throw new Error(_0x54c20e(0x18a)+_0x1dd522[_0x54c20e(0x19e)]);}},fetchAndStoreSalesOrders=async(_0x5aff1b,_0x15f28a)=>{const _0x1864f4=a6_0xd39484;try{console[_0x1864f4(0x1bc)](_0x1864f4(0x19d));const _0x1f1ade=await fetchSAPSalesOrders();if(!_0x1f1ade||typeof _0x1f1ade!==_0x1864f4(0x1bd)||!_0x1f1ade['d']||!Array['isArray'](_0x1f1ade['d'][_0x1864f4(0x185)])){console['error'](_0x1864f4(0x19a),JSON[_0x1864f4(0x1be)](_0x1f1ade)[_0x1864f4(0x193)](0x0,0xa)+_0x1864f4(0x17a));if(_0x15f28a)return _0x15f28a[_0x1864f4(0x191)](0x190)['json']({'message':_0x1864f4(0x17b)});throw new Error('Invalid\x20data\x20format\x20received\x20from\x20SAP');}console['log'](_0x1864f4(0x192)+_0x1f1ade['d'][_0x1864f4(0x185)][_0x1864f4(0x196)]+_0x1864f4(0x1ad));const _0x4675f6=_0x1f1ade['d']['results'][_0x1864f4(0x19b)]((_0x2dbd3e,_0x386d23)=>{const _0x509cc2=_0x1864f4;if(!_0x2dbd3e||typeof _0x2dbd3e!==_0x509cc2(0x1bd))return console[_0x509cc2(0x1bf)](_0x509cc2(0x180)+_0x386d23+':',_0x2dbd3e),null;return{'Vbeln':String(_0x2dbd3e?.[_0x509cc2(0x1b1)]||''),'Spart':String(_0x2dbd3e?.['Spart']||''),'Posnr':String(_0x2dbd3e?.['Posnr']||''),'Vtext':String(_0x2dbd3e?.['Vtext']||''),'Kunnr':String(_0x2dbd3e?.[_0x509cc2(0x17c)]||''),'Erdat':convertSAPDateTime(_0x2dbd3e?.['Erdat']),'Auart':String(_0x2dbd3e?.[_0x509cc2(0x1b7)]||''),'Vkorg':String(_0x2dbd3e?.['Vkorg']||''),'Netwr':convertToDecimal(_0x2dbd3e?.[_0x509cc2(0x1b0)]),'Waerk':String(_0x2dbd3e?.[_0x509cc2(0x183)]||''),'Matnr':String(_0x2dbd3e?.[_0x509cc2(0x179)]||''),'Matkl':String(_0x2dbd3e?.[_0x509cc2(0x1ac)]||''),'Wgbez':String(_0x2dbd3e?.['Wgbez']||''),'Bzirk':String(_0x2dbd3e?.[_0x509cc2(0x1a3)]||''),'Bztxt':String(_0x2dbd3e?.[_0x509cc2(0x199)]||'')};})[_0x1864f4(0x1a5)](Boolean);console['log'](_0x1864f4(0x18b),JSON[_0x1864f4(0x1be)](_0x4675f6,null,0x2));const _0x590dc7=await insertOrUpdateSalesOrders(_0x4675f6);if(!_0x590dc7||typeof _0x590dc7!==_0x1864f4(0x1bd)||!_0x590dc7[_0x1864f4(0x189)]){console[_0x1864f4(0x1bf)](_0x1864f4(0x195),_0x590dc7?.['error']||_0x1864f4(0x1b9));if(_0x15f28a)return _0x15f28a['status'](0x1f4)[_0x1864f4(0x186)]({'message':'Error\x20inserting\x20or\x20updating\x20sales\x20order\x20data','error':_0x590dc7?.['error']||_0x1864f4(0x1bb)});throw new Error('Database\x20error\x20occurred\x20while\x20inserting/updating\x20sales\x20orders.');}console[_0x1864f4(0x1bc)]('✅\x20Sales\x20Order\x20Data\x20Sync\x20Completed\x20Successfully');if(_0x15f28a)return _0x15f28a[_0x1864f4(0x191)](0xc8)['json']({'message':_0x1864f4(0x187),'insertedRows':_0x590dc7['processedRows'][_0x1864f4(0x196)],'updatedRows':_0x590dc7[_0x1864f4(0x1b4)][_0x1864f4(0x196)],'failedRows':_0x590dc7['failedRows'][_0x1864f4(0x196)],'errors':_0x590dc7[_0x1864f4(0x1a8)]});return{'success':!![],'message':_0x1864f4(0x1ae)};}catch(_0xb907e5){return console[_0x1864f4(0x1bf)](_0x1864f4(0x1c0),_0xb907e5['message']),_0x15f28a?_0x15f28a['status'](0x1f4)['json']({'message':'Internal\x20Server\x20Error','error':_0xb907e5[_0x1864f4(0x19e)]}):{'success':![],'error':_0xb907e5[_0x1864f4(0x19e)]};}};module[a6_0xd39484(0x182)]={'fetchAndStoreSalesOrders':fetchAndStoreSalesOrders};